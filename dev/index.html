<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Stabilize Function Arguments • stbl</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Stabilize Function Arguments">
<meta name="description" content="A set of consistent, opinionated functions to quickly check function arguments, coerce them to the desired configuration, or deliver informative error messages when that is not possible.">
<meta property="og:description" content="A set of consistent, opinionated functions to quickly check function arguments, coerce them to the desired configuration, or deliver informative error messages when that is not possible.">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">stbl</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.1.9009</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/stbl.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jonthegeek/stbl/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="stbl">stbl<a class="anchor" aria-label="anchor" href="#stbl"></a>
</h1></div>
<!-- badges: start -->

<p>R is flexible about classes. Variables are not declared with explicit classes, and arguments of the “wrong” class don’t cause errors until they explicitly fail at some point in the call stack. It would be helpful to keep that flexibility from a user standpoint, but to error informatively and quickly if the inputs will not work for a computation. The purpose of stbl is to allow programmers to specify what they want, and to then see if what the user supplied can work for that purpose.</p>
<p>This approach aligns with <a href="https://en.wikipedia.org/wiki/Robustness_principle" class="external-link">Postel’s Law</a>:</p>
<blockquote>
<p>“Be conservative in what you send. Be liberal in what you accept from others.”</p>
</blockquote>
<p>stbl is liberal about what it accepts (by coercing when safe) and conservative about what it returns (by ensuring that inputs have the classes and other features that are expected).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the released version of stbl from <a href="https://cran.r-project.org/" class="external-link">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"stbl"</span><span class="op">)</span></span></code></pre></div>
<div class="pkgdown-devel">
<p>Install the development version of stbl from <a href="https://github.com/" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"jonthegeek/stbl"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The primary use-case for stbl is to stabilize function arguments. The goal is to make sure arguments will work the way you expect them to work, and to give meaningful error messages when they won’t.</p>
<p>For example, perhaps you would like to protect against the case where data is not properly translated from character to integer when it’s loaded by a user.</p>
<div class="section level3">
<h3 id="without-stbl">Without stbl:<a class="anchor" aria-label="anchor" href="#without-stbl"></a>
</h3>
<p>Without the argument-stabilizers provided in stbl, error messages can be cryptic, and errors trigger when you might not want them to.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_old_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">my_arg_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">my_arg_name</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">my_old_fun</span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in my_arg_name + 1: non-numeric argument to binary operator</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-stbl">With stbl:<a class="anchor" aria-label="anchor" href="#with-stbl"></a>
</h3>
<p>stbl helps to ensure that arguments are what you expect them to be.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_fun</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">my_arg_name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">my_arg_name</span> <span class="op">&lt;-</span> <span class="fu">stbl</span><span class="fu">::</span><span class="fu"><a href="reference/stabilize_int.html">to_int</a></span><span class="op">(</span><span class="va">my_arg_name</span><span class="op">)</span></span>
<span>  <span class="va">my_arg_name</span> <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">my_fun</span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>Failures are reported with helpful messages.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_fun</span><span class="op">(</span><span class="st">"1.1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `my_fun()`:</span></span>
<span><span class="co">#&gt; ! `my_arg_name` &lt;character&gt; must be coercible to &lt;integer&gt;</span></span>
<span><span class="co">#&gt; ✖ Can't convert some values due to loss of precision.</span></span>
<span><span class="co">#&gt; • Locations: 1</span></span></code></pre></div>
<p>The errors help locate issues within vectors.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_fun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3.1"</span>, <span class="st">"4"</span>, <span class="st">"5.2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `my_fun()`:</span></span>
<span><span class="co">#&gt; ! `my_arg_name` &lt;character&gt; must be coercible to &lt;integer&gt;</span></span>
<span><span class="co">#&gt; ✖ Can't convert some values due to loss of precision.</span></span>
<span><span class="co">#&gt; • Locations: 3 and 5</span></span></code></pre></div>
<p>See <code><a href="articles/stbl.html">vignette("stbl")</a></code> to learn more about how to use stbl, and when to “upgrade” from <code>to_*()</code> functions to <code>stabilize_*()</code> functions.</p>
</div>
</div>
<div class="section level2">
<h2 id="similar-packages">Similar Packages<a class="anchor" aria-label="anchor" href="#similar-packages"></a>
</h2>
<p>Other packages perform functions similar to stbl, but with different approaches:</p>
<ul>
<li>
<strong><a href="https://mllg.github.io/checkmate/" class="external-link">{checkmate}</a> and related assertion packages:</strong> stbl’s <code>to_*()</code> and <code>stabilize_*()</code> functions are similar to the <code>assert*ish()</code> functions from {checkmate} with <code>coerce = TRUE</code>. stbl is usually faster, and provided classed error messages to allow you to handle different failure modes differently.</li>
<li>
<strong><a href="https://vctrs.r-lib.org/" class="external-link">{vctrs}</a>:</strong> {vctrs} provides strict, low-level tools for coercion and type consistency, especially useful in package internals and base-type enforcement. stbl is more tolerant and higher-level, optimized for use in functions that accept flexible user inputs (e.g. letting a version number 1.1 be passed in as numeric or character and handling both gracefully).</li>
</ul>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the stbl project is released with a <a href="https://jonthegeek.github.io/stbl/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=stbl" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jonthegeek/stbl/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jonthegeek/stbl/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing stbl</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jon Harmon <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-4781-4346" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=stbl" class="external-link"><img src="https://www.r-pkg.org/badges/version/stbl" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/jonthegeek/stbl?branch=main" class="external-link"><img src="https://codecov.io/gh/jonthegeek/stbl/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/jonthegeek/stbl/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jonthegeek/stbl/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jon Harmon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
